---
import { GET } from "../pages/api/spotify.json";

const res = await GET(Astro);
const song = await res.json();
import SpotifyTitleMarquee from "./SpotifyTitleMarquee.astro";
---

{
  song && (
    <a
      href={song.songUrl}
      target="_blank"
      class="flex cursor-pointer items-center gap-3 rounded-full text-xs hover:opacity-80 bg-white/5 border border-white/5 p-1"
    >
      <div class="size-5 overflow-hidden relative rounded-full">
        <img
          src={song.coverUrl}
          alt={song.title}
          sizes="(max-width:768px) 50px, 60px"
          class="w-full h-full object-cover lg:-rotate-90"
        />
      </div>
      <div class="flex items-center gap-1">
        <div class="w-[80px]">
          <SpotifyTitleMarquee title={song.title} artist={song.artist} />
        </div>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-arrow-up-right lg:-rotate-90 mr-1"
        >
          <path d="M7 7h10v10" />
          <path d="M7 17 17 7" />
        </svg>
      </div>
    </a>
  )
}
